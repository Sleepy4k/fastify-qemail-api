# Cloudflare Worker – QEmail
# Docs: https://developers.cloudflare.com/workers/wrangler/configuration/

name = "qemail-worker"
main = "index.ts"
compatibility_date = "2024-09-23"

# ─── Secrets (do NOT commit real values) ─────────────────────────────────────
# Set via CLI before deploying:
#   npx wrangler secret put API_ENDPOINT
#   npx wrangler secret put WEBHOOK_SECRET
#
# API_ENDPOINT  → https://api.yourdomain.com/api/v1/webhook/incoming-email
# WEBHOOK_SECRET → must match CF_WEBHOOK_SECRET in your backend .env

# ─── Email Routing handler ────────────────────────────────────────────────────
# This tells Cloudflare to invoke the `email` export for every routed message.
[triggers]
# No crons needed; email routing is configured in the dashboard per-zone.

# ─── Optional: static vars (non-sensitive) ───────────────────────────────────
# [vars]
# LOG_LEVEL = "info"
